<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MobileNet架构 - 火情识别模型</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        fire: {
                            primary: '#dc2626',
                            secondary: '#f87171',
                            accent: '#fb923c',
                            dark: '#991b1b',
                            light: '#fee2e2'
                        },
                        mobilenet: {
                            primary: '#1e40af',
                            secondary: '#3b82f6',
                            accent: '#60a5fa',
                            light: '#dbeafe'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['Consolas', 'Monaco', 'monospace']
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .layer-card {
                @apply relative cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-lg border-2 rounded-lg p-4;
            }
            .layer-card.active {
                @apply border-fire-primary bg-fire-light;
            }
            .architecture-diagram {
                @apply relative w-full overflow-x-auto py-4;
            }
            .recognition-result {
                @apply transition-all duration-500 ease-in-out;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- 页面头部 -->
    <header class="bg-mobilenet-primary text-white py-6 shadow-md">
        <div class="container mx-auto px-4">
            <h1 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold text-center">
                <i class="fa fa-fire text-fire-accent mr-2"></i>MobileNet架构 - 火情识别模型
            </h1>
            <p class="text-center text-blue-100 mt-2 max-w-3xl mx-auto">
                轻量级卷积神经网络MobileNet在火情识别场景的应用与架构解析
            </p>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 简介部分 -->
        <section class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold text-mobilenet-primary mb-4 pb-2 border-b border-gray-200">
                <i class="fa fa-info-circle mr-2"></i>模型概述
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">MobileNet核心特点</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li><i class="fa fa-check-circle text-mobilenet-secondary mr-2"></i><strong>轻量级架构</strong>：基于深度可分离卷积，参数量仅为传统CNN的1/8-1/32</li>
                        <li><i class="fa fa-check-circle text-mobilenet-secondary mr-2"></i><strong>高效推理</strong>：适合移动端/嵌入式设备实时火情检测</li>
                        <li><i class="fa fa-check-circle text-mobilenet-secondary mr-2"></i><strong>可扩展性</strong>：通过宽度/分辨率乘数灵活调整模型大小和精度</li>
                        <li><i class="fa fa-check-circle text-mobilenet-secondary mr-2"></i><strong>火情适配</strong>：针对火焰/烟雾特征优化的网络参数</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-800 mb-2">火情识别应用场景</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li><i class="fa fa-fire text-fire-secondary mr-2"></i>视频监控实时火情检测</li>
                        <li><i class="fa fa-fire text-fire-secondary mr-2"></i>无人机巡检火灾识别</li>
                        <li><i class="fa fa-fire text-fire-secondary mr-2"></i>智能家居火焰报警系统</li>
                        <li><i class="fa fa-fire text-fire-secondary mr-2"></i>工业场景烟雾检测预警</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- MobileNet架构解析 -->
        <section class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold text-mobilenet-primary mb-6 pb-2 border-b border-gray-200">
                <i class="fa fa-sitemap mr-2"></i>MobileNet架构解析
            </h2>
            
            <!-- 架构可视化 -->
            <div class="architecture-diagram mb-8">
                <div class="flex items-center justify-center space-x-2 min-w-max">
                    <!-- 输入层 -->
                    <div id="layer-input" class="layer-card border-gray-300 bg-gray-50 w-40 text-center" data-layer="input">
                        <div class="font-bold text-gray-800">输入层</div>
                        <div class="text-sm text-gray-600 mt-1">224×224×3</div>
                        <div class="text-xs text-gray-500 mt-1">火情图像输入</div>
                    </div>
                    
                    <i class="fa fa-arrow-right text-gray-400 text-xl"></i>
                    
                    <!-- 卷积层 -->
                    <div id="layer-conv1" class="layer-card border-gray-300 bg-gray-50 w-40 text-center" data-layer="conv1">
                        <div class="font-bold text-gray-800">卷积层</div>
                        <div class="text-sm text-gray-600 mt-1">3×3 Conv<br>步长=2</div>
                        <div class="text-xs text-gray-500 mt-1">特征提取</div>
                    </div>
                    
                    <i class="fa fa-arrow-right text-gray-400 text-xl"></i>
                    
                    <!-- 深度可分离卷积层 -->
                    <div id="layer-dwconv" class="layer-card border-gray-300 bg-gray-50 w-56 text-center" data-layer="dwconv">
                        <div class="font-bold text-gray-800">深度可分离卷积</div>
                        <div class="text-sm text-gray-600 mt-1">DW + PW<br>13层堆叠</div>
                        <div class="text-xs text-gray-500 mt-1">核心轻量化模块</div>
                    </div>
                    
                    <i class="fa fa-arrow-right text-gray-400 text-xl"></i>
                    
                    <!-- 池化层 -->
                    <div id="layer-pool" class="layer-card border-gray-300 bg-gray-50 w-40 text-center" data-layer="pool">
                        <div class="font-bold text-gray-800">池化层</div>
                        <div class="text-sm text-gray-600 mt-1">Avg Pool<br>7×7</div>
                        <div class="text-xs text-gray-500 mt-1">特征降维</div>
                    </div>
                    
                    <i class="fa fa-arrow-right text-gray-400 text-xl"></i>
                    
                    <!-- 分类层 -->
                    <div id="layer-classify" class="layer-card border-gray-300 bg-gray-50 w-40 text-center" data-layer="classify">
                        <div class="font-bold text-gray-800">分类层</div>
                        <div class="text-sm text-gray-600 mt-1">Softmax<br>3分类</div>
                        <div class="text-xs text-gray-500 mt-1">火/烟/正常</div>
                    </div>
                </div>
            </div>
            
            <!-- 层详情面板 -->
            <div id="layer-detail-panel" class="bg-mobilenet-light rounded-lg p-4 border border-mobilenet-accent">
                <h3 id="layer-title" class="text-lg font-bold text-mobilenet-primary mb-2">
                    <i class="fa fa-info-circle mr-2"></i>点击架构中的模块查看详情
                </h3>
                <div id="layer-content" class="text-gray-700">
                    <p class="text-center py-2">选择左侧架构图中的任意模块，查看该层在火情识别中的具体作用和技术参数</p>
                </div>
            </div>
        </section>

        <!-- 深度可分离卷积详解 -->
        <section class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-bold text-mobilenet-primary mb-4 pb-2 border-b border-gray-200">
                <i class="fa fa-cogs mr-2"></i>深度可分离卷积（Depthwise Separable Convolution）
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <h3 class="font-semibold text-gray-800 mb-2">传统卷积 VS 深度可分离卷积</h3>
                    <div class="space-y-3">
                        <div>
                            <div class="font-medium text-gray-700">传统卷积计算量：</div>
                            <div class="font-mono text-sm bg-gray-100 p-2 rounded">K×K×M×N×H×W</div>
                            <div class="text-xs text-gray-500 mt-1">K:卷积核大小, M:输入通道, N:输出通道, H×W:特征图尺寸</div>
                        </div>
                        <div>
                            <div class="font-medium text-gray-700">深度可分离卷积计算量：</div>
                            <div class="font-mono text-sm bg-gray-100 p-2 rounded">K×K×M×H×W + M×N×H×W</div>
                            <div class="text-xs text-gray-500 mt-1">深度卷积 + 逐点卷积</div>
                        </div>
                        <div class="bg-green-50 p-2 rounded border border-green-200">
                            <i class="fa fa-lightbulb-o text-green-600 mr-1"></i>
                            <span class="text-green-700 font-medium">计算量减少约8-9倍，特别适合移动端火情实时检测</span>
                        </div>
                    </div>
                </div>
                
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">火情识别优化策略</h3>
                    <ul class="space-y-2 text-gray-700">
                        <li><i class="fa fa-angle-right text-fire-secondary mr-1"></i><strong>火焰特征增强</strong>：针对红色/橙色光谱特征优化卷积核</li>
                        <li><i class="fa fa-angle-right text-fire-secondary mr-1"></i><strong>烟雾检测优化</strong>：增加低对比度区域的特征提取能力</li>
                        <li><i class="fa fa-angle-right text-fire-secondary mr-1"></i><strong>实时性保障</strong>：≤30ms/帧的推理速度，满足监控要求</li>
                        <li><i class="fa fa-angle-right text-fire-secondary mr-1"></i><strong>误检率控制</strong>：通过多尺度特征融合减少日光/灯光误判</li>
                    </ul>
                </div>
            </div>
            
            <!-- 性能对比图表 -->
            <div class="bg-gray-50 rounded-lg p-4">
                <h3 class="font-semibold text-gray-800 mb-3 text-center">MobileNet火情识别模型性能对比</h3>
                <div class="h-64">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </section>

        <!-- 交互演示区 -->
        <section class="bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-bold text-mobilenet-primary mb-4 pb-2 border-b border-gray-200">
                <i class="fa fa-play-circle mr-2"></i>火情识别交互演示
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- 图片选择区 -->
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">选择测试图片：</h3>
                    <div class="grid grid-cols-3 gap-3 mb-4">
                        <!-- 替换为真实火焰图片 -->
                        <div class="border-2 border-gray-200 rounded-lg overflow-hidden cursor-pointer hover:border-fire-primary transition-all" data-img="fire1">
                            <img src="https://images.unsplash.com/photo-1579403124614-197f69d8187b?q=80&w=200&h=150&fit=crop" alt="火焰图片1" class="w-full h-32 object-cover">
                            <div class="text-center text-sm py-1 bg-gray-50">火焰场景1</div>
                        </div>
                        <!-- 替换为真实烟雾图片 -->
                        <div class="border-2 border-gray-200 rounded-lg overflow-hidden cursor-pointer hover:border-fire-primary transition-all" data-img="smoke1">
                            <img src="https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?q=80&w=200&h=150&fit=crop" alt="烟雾图片1" class="w-full h-32 object-cover">
                            <div class="text-center text-sm py-1 bg-gray-50">烟雾场景1</div>
                        </div>
                        <!-- 正常场景图片 -->
                        <div class="border-2 border-gray-200 rounded-lg overflow-hidden cursor-pointer hover:border-fire-primary transition-all" data-img="normal1">
                            <img src="https://images.unsplash.com/photo-1472214103451-9374bd1c798e?q=80&w=200&h=150&fit=crop" alt="正常场景1" class="w-full h-32 object-cover">
                            <div class="text-center text-sm py-1 bg-gray-50">正常场景1</div>
                        </div>
                    </div>
                    
                    <div id="selected-image-container" class="border-2 border-gray-200 rounded-lg overflow-hidden mb-4">
                        <img id="selected-image" src="https://images.unsplash.com/photo-1472214103451-9374bd1c798e?q=80&w=400&h=300&fit=crop" alt="选择测试图片" class="w-full h-64 object-cover">
                    </div>
                    
                    <button id="recognize-btn" class="w-full bg-fire-primary hover:bg-fire-dark text-white font-bold py-2 px-4 rounded transition-colors">
                        <i class="fa fa-search mr-2"></i>开始火情识别
                    </button>
                </div>
                
                <!-- 识别结果区 -->
                <div>
                    <h3 class="font-semibold text-gray-800 mb-3">识别结果：</h3>
                    <div id="recognition-result-panel" class="bg-gray-50 rounded-lg p-4 h-full flex flex-col justify-center">
                        <div id="result-initial" class="recognition-result text-center">
                            <i class="fa fa-image text-4xl text-gray-400 mb-3"></i>
                            <p class="text-gray-600">选择左侧测试图片并点击识别按钮</p>
                        </div>
                        
                        <div id="result-loading" class="recognition-result hidden text-center">
                            <div class="animate-spin text-fire-primary text-4xl mb-3">
                                <i class="fa fa-circle-o-notch"></i>
                            </div>
                            <p class="text-gray-600">MobileNet模型推理中...</p>
                            <div class="w-full bg-gray-200 rounded-full h-2 mt-4">
                                <div class="bg-fire-secondary h-2 rounded-full animate-pulse" style="width: 75%"></div>
                            </div>
                        </div>
                        
                        <div id="result-success" class="recognition-result hidden">
                            <div id="result-icon" class="text-center text-4xl mb-3"></div>
                            <h4 id="result-title" class="text-xl font-bold text-center mb-3"></h4>
                            
                            <div class="bg-white rounded-lg p-3 border border-gray-200 mb-4">
                                <div class="font-medium text-gray-700 mb-1">识别置信度：</div>
                                <div id="confidence-bar" class="w-full bg-gray-200 rounded-full h-2.5 mb-1">
                                    <div id="confidence-fill" class="bg-fire-secondary h-2.5 rounded-full"></div>
                                </div>
                                <div id="confidence-text" class="text-sm text-right text-gray-600"></div>
                            </div>
                            
                            <div class="bg-white rounded-lg p-3 border border-gray-200">
                                <div class="font-medium text-gray-700 mb-2">模型输出详情：</div>
                                <div id="result-details" class="grid grid-cols-3 gap-2 text-center text-sm">
                                    <div class="bg-gray-50 p-2 rounded">
                                        <div class="font-bold text-fire-primary">火焰</div>
                                        <div id="fire-score" class="text-gray-600">0.00%</div>
                                    </div>
                                    <div class="bg-gray-50 p-2 rounded">
                                        <div class="font-bold text-gray-600">烟雾</div>
                                        <div id="smoke-score" class="text-gray-600">0.00%</div>
                                    </div>
                                    <div class="bg-gray-50 p-2 rounded">
                                        <div class="font-bold text-green-600">正常</div>
                                        <div id="normal-score" class="text-gray-600">0.00%</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-mobilenet-primary text-white py-4 mt-8">
        <div class="container mx-auto px-4 text-center text-sm">
            <p>MobileNet火情识别模型交互式展示 © 2024 | 纯前端本地运行版本</p>
            <p class="mt-1 text-blue-100">基于MobileNet v2架构 | 适用于嵌入式/移动端火情检测</p>
        </div>
    </footer>

    <!-- JavaScript交互逻辑 -->
    <script>
        // 性能对比图表初始化
        const initChart = () => {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['参数量(M)', '计算量(GFlops)', '推理速度(ms/帧)', '识别准确率(%)', '内存占用(MB)'],
                    datasets: [
                        {
                            label: '传统CNN',
                            data: [138, 3.8, 120, 94.5, 520],
                            backgroundColor: '#94a3b8',
                            borderColor: '#64748b',
                            borderWidth: 1
                        },
                        {
                            label: 'MobileNet V2',
                            data: [3.5, 0.3, 28, 92.8, 85],
                            backgroundColor: '#3b82f6',
                            borderColor: '#1d4ed8',
                            borderWidth: 1
                        },
                        {
                            label: 'MobileNet(火情优化)',
                            data: [2.8, 0.25, 22, 93.2, 72],
                            backgroundColor: '#f87171',
                            borderColor: '#dc2626',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        };

        // 架构层详情数据
        const layerDetails = {
            input: {
                title: '输入层 - 火情图像预处理',
                content: `
                    <ul class="space-y-2">
                        <li><strong>输入尺寸</strong>：224×224×3 RGB图像</li>
                        <li><strong>预处理</strong>：
                            <ul class="ml-4 mt-1 space-y-1">
                                <li>归一化：像素值除以255，范围[0,1]</li>
                                <li>均值减法：减去ImageNet均值 [0.485, 0.456, 0.406]</li>
                                <li>标准差调整：除以[0.229, 0.224, 0.225]</li>
                            </ul>
                        </li>
                        <li><strong>火情适配</strong>：对火焰区域进行亮度增强，提升低光环境识别率</li>
                        <li><strong>数据增强</strong>：随机裁剪、翻转、亮度调整，提升模型泛化能力</li>
                    </ul>
                `
            },
            conv1: {
                title: '初始卷积层 - 基础特征提取',
                content: `
                    <ul class="space-y-2">
                        <li><strong>卷积参数</strong>：3×3卷积核，步长=2，输出通道=32</li>
                        <li><strong>激活函数</strong>：ReLU6（限制输出范围[0,6]，适合移动端）</li>
                        <li><strong>批归一化</strong>：加速训练收敛，提升数值稳定性</li>
                        <li><strong>输出尺寸</strong>：112×112×32</li>
                        <li><strong>火情特征</strong>：提取火焰的边缘、颜色、纹理等基础特征</li>
                    </ul>
                `
            },
            dwconv: {
                title: '深度可分离卷积层 - 核心特征提取',
                content: `
                    <div class="space-y-3">
                        <div>
                            <strong>结构组成</strong>：13个瓶颈层（Bottleneck）堆叠
                            <ul class="ml-4 mt-1 space-y-1">
                                <li>深度卷积（DW）：每个通道独立卷积，3×3核</li>
                                <li>逐点卷积（PW）：1×1卷积融合通道特征</li>
                                <li>残差连接：保留低层特征，防止梯度消失</li>
                            </ul>
                        </div>
                        <div>
                            <strong>火情识别优化</strong>：
                            <ul class="ml-4 mt-1 space-y-1">
                                <li>前4层：增强颜色特征提取（火焰红/橙色）</li>
                                <li>中间层：强化纹理特征（火焰跳动、烟雾扩散）</li>
                                <li>后几层：全局特征融合，提升场景理解能力</li>
                            </ul>
                        </div>
                        <div class="bg-fire-light p-2 rounded border border-fire-secondary">
                            <i class="fa fa-fire text-fire-primary mr-1"></i>
                            <strong>关键优势</strong>：在保持火情识别精度的同时，计算量减少8倍以上
                        </div>
                    </div>
                `
            },
            pool: {
                title: '平均池化层 - 特征降维',
                content: `
                    <ul class="space-y-2">
                        <li><strong>池化参数</strong>：7×7平均池化，步长=1</li>
                        <li><strong>输出尺寸</strong>：1×1×1280（MobileNet V2）</li>
                        <li><strong>作用</strong>：
                            <ul class="ml-4 mt-1 space-y-1">
                                <li>特征维度压缩，减少参数量</li>
                                <li>保留全局特征信息</li>
                                <li>提升模型对输入变化的鲁棒性</li>
                            </ul>
                        </li>
                        <li><strong>火情适配</strong>：保留火焰/烟雾的全局空间分布特征</li>
                    </ul>
                `
            },
            classify: {
                title: '分类层 - 火情判断输出',
                content: `
                    <div class="space-y-3">
                        <div>
                            <strong>分类结构</strong>：
                            <ul class="ml-4 mt-1 space-y-1">
                                <li>全连接层：1280 → 3</li>
                                <li>激活函数：Softmax</li>
                                <li>输出类别：火焰、烟雾、正常场景</li>
                            </ul>
                        </div>
                        <div>
                            <strong>阈值设置</strong>：
                            <ul class="ml-4 mt-1 space-y-1">
                                <li>火焰识别：置信度≥0.7 触发报警</li>
                                <li>烟雾识别：置信度≥0.8 触发报警</li>
                                <li>双判据：火焰+烟雾同时检测提升准确率</li>
                            </ul>
                        </div>
                        <div class="bg-fire-light p-2 rounded border border-fire-secondary">
                            <i class="fa fa-bell text-fire-primary mr-1"></i>
                            <strong>报警机制</strong>：识别到火情后输出置信度和坐标信息，支持联动报警系统
                        </div>
                    </div>
                `
            }
        };

        // 初始化层点击事件
        const initLayerClick = () => {
            const layers = document.querySelectorAll('.layer-card');
            const layerTitle = document.getElementById('layer-title');
            const layerContent = document.getElementById('layer-content');
            
            layers.forEach(layer => {
                layer.addEventListener('click', () => {
                    // 重置所有层样式
                    layers.forEach(l => l.classList.remove('active'));
                    // 设置当前层样式
                    layer.classList.add('active');
                    
                    // 更新详情面板
                    const layerId = layer.dataset.layer;
                    const detail = layerDetails[layerId];
                    layerTitle.innerHTML = `<i class="fa fa-info-circle mr-2"></i>${detail.title}`;
                    layerContent.innerHTML = detail.content;
                });
            });
        };

        // 初始化演示图片点击事件
        const initDemoImages = () => {
            const imageItems = document.querySelectorAll('[data-img]');
            const selectedImage = document.getElementById('selected-image');
            let currentImage = 'normal1';
            
            // 模拟识别结果数据
            const recognitionData = {
                fire1: {
                    type: 'fire',
                    title: '检测到火焰！',
                    icon: '<i class="fa fa-fire text-fire-primary"></i>',
                    confidence: 0.96,
                    scores: { fire: 96.2, smoke: 2.8, normal: 1.0 }
                },
                smoke1: {
                    type: 'smoke',
                    title: '检测到烟雾！',
                    icon: '<i class="fa fa-cloud text-gray-500"></i>',
                    confidence: 0.92,
                    scores: { fire: 5.3, smoke: 92.1, normal: 2.6 }
                },
                normal1: {
                    type: 'normal',
                    title: '正常场景，无火情',
                    icon: '<i class="fa fa-check-circle text-green-600"></i>',
                    confidence: 0.98,
                    scores: { fire: 0.8, smoke: 1.2, normal: 98.0 }
                }
            };
            
            // 图片选择
            imageItems.forEach(item => {
                item.addEventListener('click', () => {
                    // 重置边框样式
                    imageItems.forEach(i => i.classList.remove('border-fire-primary'));
                    imageItems.forEach(i => i.classList.add('border-gray-200'));
                    // 设置选中样式
                    item.classList.remove('border-gray-200');
                    item.classList.add('border-fire-primary');
                    
                    // 更新显示图片
                    currentImage = item.dataset.img;
                    // 替换大图地址
                    const imgSrcMap = {
                        fire1: 'https://images.unsplash.com/photo-1579403124614-197f69d8187b?q=80&w=400&h=300&fit=crop',
                        smoke1: 'https://images.unsplash.com/photo-1551632436-cbf8dd35adfa?q=80&w=400&h=300&fit=crop',
                        normal1: 'https://images.unsplash.com/photo-1472214103451-9374bd1c798e?q=80&w=400&h=300&fit=crop'
                    };
                    selectedImage.src = imgSrcMap[currentImage];
                    
                    // 重置结果面板
                    document.getElementById('result-initial').classList.remove('hidden');
                    document.getElementById('result-loading').classList.add('hidden');
                    document.getElementById('result-success').classList.add('hidden');
                });
            });
            
            // 识别按钮点击事件
            document.getElementById('recognize-btn').addEventListener('click', () => {
                // 显示加载状态
                document.getElementById('result-initial').classList.add('hidden');
                document.getElementById('result-loading').classList.remove('hidden');
                document.getElementById('result-success').classList.add('hidden');
                
                // 模拟推理延迟
                setTimeout(() => {
                    // 获取对应结果数据
                    const result = recognitionData[currentImage];
                    
                    // 更新结果面板
                    document.getElementById('result-loading').classList.add('hidden');
                    document.getElementById('result-success').classList.remove('hidden');
                    
                    // 设置结果内容
                    document.getElementById('result-icon').innerHTML = result.icon;
                    document.getElementById('result-title').textContent = result.title;
                    
                    // 设置置信度
                    const confidencePercent = Math.round(result.confidence * 100);
                    document.getElementById('confidence-fill').style.width = `${confidencePercent}%`;
                    document.getElementById('confidence-text').textContent = `${confidencePercent}%`;
                    
                    // 设置分数
                    document.getElementById('fire-score').textContent = `${result.scores.fire.toFixed(1)}%`;
                    document.getElementById('smoke-score').textContent = `${result.scores.smoke.toFixed(1)}%`;
                    document.getElementById('normal-score').textContent = `${result.scores.normal.toFixed(1)}%`;
                    
                    // 高亮当前类别
                    if (result.type === 'fire') {
                        document.getElementById('fire-score').classList.add('font-bold', 'text-fire-primary');
                        document.getElementById('smoke-score').classList.remove('font-bold', 'text-fire-primary');
                        document.getElementById('normal-score').classList.remove('font-bold', 'text-fire-primary');
                    } else if (result.type === 'smoke') {
                        document.getElementById('fire-score').classList.remove('font-bold', 'text-fire-primary');
                        document.getElementById('smoke-score').classList.add('font-bold', 'text-gray-600');
                        document.getElementById('normal-score').classList.remove('font-bold', 'text-fire-primary');
                    } else {
                        document.getElementById('fire-score').classList.remove('font-bold', 'text-fire-primary');
                        document.getElementById('smoke-score').classList.remove('font-bold', 'text-fire-primary');
                        document.getElementById('normal-score').classList.add('font-bold', 'text-green-600');
                    }
                }, 1500);
            });
        };

        // 页面加载完成初始化
        window.addEventListener('DOMContentLoaded', () => {
            initChart();
            initLayerClick();
            initDemoImages();
        });
    </script>
</body>
</html>
